<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Diccionarios</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .book {
            border: 1px solid #ddd;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .book h2 {
            margin-top: 0;
            text-align: center; /* Centrar el título */
        }
        .keywords {
            margin: 10px 0;
            text-align: center; /* Centrar las palabras clave */
        }
        .description, .guide {
            margin: 10px 0;
            text-align: justify;  /* Justificar el texto */
        }
        .cover {
            width: 100%;
            max-width: 300px;
            display: block;
            margin: 0 auto;  /* Centrar la imagen */
            object-fit: contain;  /* Asegurarse de que la imagen no se distorsione */
        }
        .pagination {
            text-align: center;
            margin-top: 20px;
        }
        .pagination button {
            padding: 5px 15px;
            margin: 0 5px;
            cursor: pointer;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
        }
        .pagination button:disabled {
            background-color: #ccc;
        }
    </style>
</head>
<body>

<div class="container">
    <div id="book-list"></div>
    <div class="pagination">
        <button id="prev-btn" onclick="changePage('prev')">Anterior</button>
        <button id="next-btn" onclick="changePage('next')">Siguiente</button>
    </div>
</div>

<script>
    let currentPage = 1;
    const booksPerPage = 40;
    let books = [];

    // Función para cargar el archivo JSON
    fetch('data2.json')
        .then(response => response.json())
        .then(data => {
            // Flatten the JSON structure to create a list of all books
            books = Object.values(data[0]); // Convertimos el objeto en un array de libros
            renderBooks(); // Inicializamos la renderización
        })
        .catch(error => console.error('Error al cargar el JSON:', error));

    // Función para convertir los saltos de línea en <br> (convertir texto en formato HTML)
    function convertNewlinesToBreaks(text) {
        return text.replace(/\n/g, '<br><br>');
    }

    // Función para renderizar los libros
    function renderBooks() {
        const bookListElement = document.getElementById("book-list");
        const startIndex = (currentPage - 1) * booksPerPage;
        const endIndex = startIndex + booksPerPage;
        const booksToRender = books.slice(startIndex, endIndex);

        // Limpiar la lista de libros
        bookListElement.innerHTML = "";

        booksToRender.forEach(book => {
            const title = book.title.join(', ');
            const coverImage = book.cover;
            const description = convertNewlinesToBreaks(book.description.join(' ')); // Convertir saltos de línea en description
            const guide = convertNewlinesToBreaks(book.guide.join(' ')); // Convertir saltos de línea en guide
            const keywords = book.keywords.join(', ');

            const bookElement = document.createElement("div");
            bookElement.classList.add("book");

            bookElement.innerHTML = `
                <h2>${title}</h2>
                <img src="${coverImage}" alt="Cover" class="cover">
                <div class="keywords">
                    <h3>Palabras Clave</h3>
                    <p>${keywords}</p>
                </div>
                <div class="guide">
                    <h3>Guía</h3>
                    <p>${guide}</p>
                </div>
                <div class="description">
                    <h3>Descripción</h3>
                    <p>${description}</p>
                </div>
                
                
            `;

            bookListElement.appendChild(bookElement);
        });

        updatePagination();
    }

    // Función para cambiar la página
    function changePage(direction) {
        if (direction === 'prev' && currentPage > 1) {
            currentPage--;
        } else if (direction === 'next' && currentPage < Math.ceil(books.length / booksPerPage)) {
            currentPage++;
        }

        renderBooks();  // Renderizar la página actual de libros
    }

    // Función para actualizar los botones de paginación
    function updatePagination() {
        const prevButton = document.getElementById("prev-btn");
        const nextButton = document.getElementById("next-btn");

        prevButton.disabled = currentPage === 1;
        nextButton.disabled = currentPage === Math.ceil(books.length / booksPerPage);
    }
</script>

</body>
</html>
